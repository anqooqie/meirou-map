$(function(){ // on dom ready

$('#cy').cytoscape({
  style: cytoscape.stylesheet()
    .selector('node')
      .css({
        'content': 'data(name)',
        'text-valign': 'center',
        'color': 'white',
        'text-outline-width': 2
      })
    .selector('node.adjacent')
      .css({
        'background-color': '#AAA',
        'text-outline-color': '#888'
      })
    .selector('edge')
      .css({
        'target-arrow-shape': 'none',
        'line-color': '#AAA',
        'target-arrow-color': '#AAA',
        'source-arrow-color': '#AAA'
      })
    .selector('edge.directed')
      .css({
        'target-arrow-shape': 'triangle'
      })
    .selector('.faded')
      .css({
        'opacity': 0.25,
        'text-opacity': 0
      }),
  
  elements: {
    nodes: [
      { data: { id: '10', name: '10' }, classes: "adjacent" },
      { data: { id: '12', name: '12' }, classes: "adjacent" },
      { data: { id: '20', name: '20' }, classes: "adjacent" },
      { data: { id: '21', name: '21' } },
      { data: { id: '22', name: '22' } },
      { data: { id: '23', name: '23' } },
      { data: { id: '24', name: '24' } },
      { data: { id: '25', name: '25' } },
      { data: { id: '26', name: '26' } },
      { data: { id: '27', name: '27' } },
      { data: { id: '28', name: '28' } },
      { data: { id: '29', name: '29' } },
      { data: { id: '30', name: '30' } },
      { data: { id: '31', name: '31' } },
      { data: { id: '32', name: '32' } },
      { data: { id: '33', name: '33' } },
      { data: { id: '34', name: '34' } },
      { data: { id: '35', name: '35' } },
      { data: { id: '37', name: '37' } },
      { data: { id: '38', name: '38' } },
      { data: { id: '39', name: '39' } },
      { data: { id: '40', name: '40' } },
      { data: { id: '41', name: '41' } },
      { data: { id: '42', name: '42' } },
      { data: { id: '44', name: '44' } },
      { data: { id: '45', name: '45' } },
      { data: { id: '46', name: '46' } },
      { data: { id: '47', name: '47' } },
      { data: { id: '48', name: '48' } },
      { data: { id: '49', name: '49' } },
      { data: { id: '50', name: '50' } },
      { data: { id: '51', name: '51' } },
      { data: { id: '52', name: '52' } },
      { data: { id: '53', name: '53' } },
      { data: { id: '54', name: '54' } },
      { data: { id: '55', name: '55' } },
      { data: { id: '56', name: '56' } },
      { data: { id: '57', name: '57' } },
      { data: { id: '58', name: '58' } },
      { data: { id: '59t', name: '59上' } },
      { data: { id: '59m', name: '59中' } },
      { data: { id: '59b', name: '59下' } },
      { data: { id: '60', name: '60' } },
      { data: { id: '61', name: '61' } },
      { data: { id: '62', name: '62' } },
      { data: { id: '63', name: '63' } },
      { data: { id: '64', name: '64' } },
      { data: { id: '65', name: '65' } },
      { data: { id: '66', name: '66' } },
      { data: { id: '67', name: '67' } },
      { data: { id: '68', name: '68' } },
      { data: { id: '69', name: '69' } },
      { data: { id: '70', name: '70' } },
      { data: { id: '71', name: '71' } },
      { data: { id: '72', name: '72' } },
      { data: { id: '73', name: '73' } },
      { data: { id: '74', name: '74' } },
      { data: { id: '75', name: '75' } },
      { data: { id: '76', name: '76' } },
      { data: { id: '77', name: '77' } },
      { data: { id: '78', name: '78' } },
      { data: { id: '79', name: '79' } },
      { data: { id: '80', name: '80' } },
      { data: { id: '81', name: '81' } },
      { data: { id: '82', name: '82' } },
      { data: { id: '83', name: '83' } },
      { data: { id: '84', name: '84' } },
      { data: { id: '85', name: '85' } },
      { data: { id: '86', name: '86' } },
      { data: { id: '87', name: '87' } },
      { data: { id: '88', name: '88' } },
      { data: { id: '89', name: '89' } },
      { data: { id: '90', name: '90' } },
      { data: { id: '91', name: '91' } },
      { data: { id: '92', name: '92' } },
      { data: { id: '93', name: '93' } },
      { data: { id: '94', name: '94' } },
      { data: { id: '95', name: '95' } },
      { data: { id: '96', name: '96' } },
      { data: { id: '97', name: '97' } },
      { data: { id: '98', name: '98' } },
      { data: { id: '99', name: '99' } },
      { data: { id: '100', name: '100' } },
      { data: { id: '101', name: '101' } },
      { data: { id: '102', name: '102' } },
      { data: { id: '103', name: '103' } },
      { data: { id: '104-100', name: '104' }, classes: "adjacent" },
      { data: { id: '104-103', name: '104' }, classes: "adjacent" },
      { data: { id: '105-82', name: '105' }, classes: "adjacent" },
      { data: { id: '105-100', name: '105' }, classes: "adjacent" },
      { data: { id: '106', name: '106' }, classes: "adjacent" },
      { data: { id: '117-82', name: '117' }, classes: "adjacent" },
      { data: { id: '117-91', name: '117' }, classes: "adjacent" },
      { data: { id: '119-21', name: '119' }, classes: "adjacent" },
      { data: { id: '119-100', name: '119' }, classes: "adjacent" },
      { data: { id: '121', name: '121' }, classes: "adjacent" },
      { data: { id: '122c', name: '122中央' }, classes: "adjacent" },
      { data: { id: '123-85', name: '123' }, classes: "adjacent" },
      { data: { id: '123-93', name: '123' }, classes: "adjacent" },
      { data: { id: '123-98', name: '123' }, classes: "adjacent" },
      { data: { id: '123-103', name: '123' }, classes: "adjacent" },
    ],
    edges: [
      { data: { source: '10', target: '59b' }, classes: "directed" },
      { data: { source: '12', target: '53' }, classes: "directed" },
      { data: { source: '20', target: '21' } },
      { data: { source: '21', target: '22' } },
      { data: { source: '21', target: '58' }, classes: "directed" },
      { data: { source: '21', target: '119-21' }, classes: "directed" },
      { data: { source: '22', target: '23' } },
      { data: { source: '22', target: '31' } },
      { data: { source: '22', target: '44' } },
      { data: { source: '22', target: '56' } },
      { data: { source: '22', target: '58' } },
      { data: { source: '22', target: '60' } },
      { data: { source: '23', target: '24' } },
      { data: { source: '24', target: '25' } },
      { data: { source: '25', target: '26' } },
      { data: { source: '25', target: '30' } },
      { data: { source: '26', target: '27' } },
      { data: { source: '27', target: '49' } },
      { data: { source: '27', target: '28' } },
      { data: { source: '28', target: '29' } },
      { data: { source: '29', target: '52' } },
      { data: { source: '30', target: '51' } },
      { data: { source: '31', target: '32' } },
      { data: { source: '31', target: '53' } },
      { data: { source: '31', target: '55' } },
      { data: { source: '32', target: '33' } },
      { data: { source: '32', target: '58' } },
      { data: { source: '33', target: '34' } },
      { data: { source: '34', target: '62' } },
      { data: { source: '35', target: '61' }, classes: "directed" },
      { data: { source: '37', target: '61' }, classes: "directed" },
      { data: { source: '38', target: '53' } },
      { data: { source: '39', target: '53' } },
      { data: { source: '39', target: '40' } },
      { data: { source: '40', target: '41' } },
      { data: { source: '41', target: '42' } },
      { data: { source: '44', target: '47' } },
      { data: { source: '45', target: '46' } },
      { data: { source: '45', target: '48' }, classes: "directed" },
      { data: { source: '46', target: '47' } },
      { data: { source: '48', target: '53' } },
      { data: { source: '49', target: '56' } },
      { data: { source: '49', target: '51' } },
      { data: { source: '50', target: '52' }, classes: "directed" },
      { data: { source: '50', target: '54' } },
      { data: { source: '50', target: '56' } },
      { data: { source: '51', target: '52' } },
      { data: { source: '51', target: '54' }, classes: "directed" },
      { data: { source: '52', target: '54' } },
      { data: { source: '52', target: '61' }, classes: "directed" },
      { data: { source: '53', target: '57' } },
      { data: { source: '53', target: '58' }, classes: "directed"  },
      { data: { source: '55', target: '53' }, classes: "directed" },
      { data: { source: '56', target: '54' }, classes: "directed" },
      { data: { source: '56', target: '58' } },
      { data: { source: '57', target: '82' }, classes: "directed" },
      { data: { source: '58', target: '35' }, classes: "directed" },
      { data: { source: '58', target: '37' }, classes: "directed" },
      { data: { source: '58', target: '57' }, classes: "directed" },
      { data: { source: '59t', target: '59m' }, classes: "directed" },
      { data: { source: '59m', target: '62' } },
      { data: { source: '59m', target: '59b' }, classes: "directed" },
      { data: { source: '59b', target: '22' }, classes: "directed" },
      { data: { source: '59b', target: '61' } },
      { data: { source: '60', target: '59t' } },
      { data: { source: '60', target: '59m' }, classes: "directed" },
      { data: { source: '61', target: '42' }, classes: "directed" },
      { data: { source: '61', target: '63' } },
      { data: { source: '61', target: '64' } },
      { data: { source: '61', target: '73' }, classes: "directed" },
      { data: { source: '62', target: '65' } },
      { data: { source: '62', target: '66' }, classes: "directed" },
      { data: { source: '62', target: '67' } },
      { data: { source: '62', target: '68' } },
      { data: { source: '63', target: '69' } },
      { data: { source: '63', target: '72' } },
      { data: { source: '64', target: '65' }, classes: "directed" },
      { data: { source: '64', target: '72' } },
      { data: { source: '65', target: '61' }, classes: "directed" },
      { data: { source: '65', target: '70' } },
      { data: { source: '65', target: '77' } },
      { data: { source: '66', target: '82' }, classes: "directed" },
      { data: { source: '67', target: '65' }, classes: "directed" },
      { data: { source: '67', target: '70' }, classes: "directed" },
      { data: { source: '67', target: '77' }, classes: "directed" },
      { data: { source: '67', target: '81' } },
      { data: { source: '68', target: '91' }, classes: "directed" },
      { data: { source: '69', target: '72' } },
      { data: { source: '69', target: '74' } },
      { data: { source: '70', target: '71' } },
      { data: { source: '70', target: '78' } },
      { data: { source: '70', target: '80' } },
      { data: { source: '72', target: '75' } },
      { data: { source: '73', target: '65' }, classes: "directed" },
      { data: { source: '73', target: '76' } },
      { data: { source: '74', target: '84' } },
      { data: { source: '76', target: '83' } },
      { data: { source: '77', target: '70' }, classes: "directed" },
      { data: { source: '77', target: '82' } },
      { data: { source: '78', target: '79' } },
      { data: { source: '79', target: '92' } },
      { data: { source: '80', target: '71' }, classes: "directed" },
      { data: { source: '80', target: '82' }, classes: "directed" },
      { data: { source: '80', target: '89' }, classes: "directed" },
      { data: { source: '80', target: '96' }, classes: "directed" },
      { data: { source: '81', target: '88' } },
      { data: { source: '82', target: '70' }, classes: "directed" },
      { data: { source: '82', target: '71' }, classes: "directed" },
      { data: { source: '82', target: '94' } },
      { data: { source: '82', target: '117-82' } },
      { data: { source: '83', target: '85' } },
      { data: { source: '84', target: '90' } },
      { data: { source: '85', target: '86' } },
      { data: { source: '86', target: '87' } },
      { data: { source: '85', target: '88' } },
      { data: { source: '85', target: '97' } },
      { data: { source: '88', target: '97' } },
      { data: { source: '88', target: '98' } },
      { data: { source: '89', target: '66' }, classes: "directed" },
      { data: { source: '89', target: '82' }, classes: "directed" },
      { data: { source: '90', target: '97' }, classes: "directed" },
      { data: { source: '91', target: '94' } },
      { data: { source: '91', target: '102' } },
      { data: { source: '91', target: '103' } },
      { data: { source: '92', target: '89' }, classes: "directed" },
      { data: { source: '92', target: '93' } },
      { data: { source: '94', target: '95' } },
      { data: { source: '95', target: '96' } },
      { data: { source: '96', target: '99' } },
      { data: { source: '97', target: '98' } },
      { data: { source: '98', target: '82' }, classes: "directed" },
      { data: { source: '98', target: '85' }, classes: "directed" },
      { data: { source: '98', target: '99' } },
      { data: { source: '98', target: '101' } },
      { data: { source: '99', target: '100' } },
      { data: { source: '100', target: '104-100' } },
      { data: { source: '100', target: '105-100' } },
      { data: { source: '100', target: '106' } },
      { data: { source: '100', target: '119-100' }, classes: "directed" },
      { data: { source: '100', target: '121' } },
      { data: { source: '100', target: '122c' } },
      { data: { source: '102', target: '99' }, classes: "directed" },
      { data: { source: '104-103', target: '103' }, classes: "directed" },
      { data: { source: '105-82', target: '82' }, classes: "directed" },
      { data: { source: '117-91', target: '91' }, classes: "directed" },
      { data: { source: '123-85', target: '85' }, classes: "directed" },
      { data: { source: '123-93', target: '93' }, classes: "directed" },
      { data: { source: '123-98', target: '98' }, classes: "directed" },
      { data: { source: '123-103', target: '103' }, classes: "directed" },
    ]
  },
  
  layout: {
    name: 'dagre',
    padding: 10
  },
  
  // on graph initial layout done (could be async depending on layout...)
  ready: function(){
    window.cy = this;
    // giddy up...
    
    cy.elements().unselectify();
    
    cy.on('tap', 'node', function(e){
      var node = e.cyTarget; 
      var neighborhood = node.neighborhood().add(node);
      
      cy.elements().addClass('faded');
      neighborhood.removeClass('faded');
    });
    
    cy.on('tap', function(e){
      if( e.cyTarget === cy ){
        cy.elements().removeClass('faded');
      }
    });
  }
});

}); // on dom ready
